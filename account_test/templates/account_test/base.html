{% load static %}
{% load socialaccount %}

{% load account %}


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">

    <title>{% block title %}{% endblock %}</title>

</head>
<body>

    <ul>
    {% if user.is_authenticated %}

        <li><a href="{% url 'logout' %}">Logout</a></li>
            <li><a href="{% url 'password_change' %}">Изменить пароль</a></li>
    <li><a href="{% url 'edit_profile' %}">Редактирование профиля</a></li>

    {% else %}
    <li><a href="{% url 'register' %}">Регистрация</a></li>
        <li><a href="{% url 'login' %}">Login</a></li>
    <li><a href="{% provider_login_url 'google' %}">Google</a></li>

    <li><a href="{% url 'password_reset' %}">Восстановитть пароль</a></li>

{% endif %}
{% user_display user %}

</ul>
{% block content %}{% endblock %}

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script  src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>
    <script>
    var csrftoken = Cookies.get('csrftoken');
    function csrfSafeMethod(method) {
      //Для этих методов токен не будет подставляться в заголовок
      return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
      }
      $.ajaxSetup({
        beforeSend: function (xhr, settings) {
          if (!csrfSafeMethod(settings.type) && !this.crossDomain) {
            xhr.setRequestHeader("X-CSRFToken", csrftoken);
          }
        }
       });

        $(document).ready(function(){
        {% block dom %}{% endblock %}
        }); </script>
</body>
</html>